# 工厂模式

### 设计原则

> 要依赖抽象，不要依赖具体类（依赖倒置原则）。

```
- 不能让高层组件依赖低层组件，而且，不管高层或者低层组件都应该依赖于抽象。
```

### 设计模式

> **简单工厂**

```
简单工厂把全部的事情，在一个地方都处理完了。
```
> **工厂方法模式**：定义了一个创建对象的接口，但由子类决定实例化的类是哪一个。工厂方法让类把实例化推迟到子类。（PizzaStore）

```
- 可以定义一个默认的工厂方法来产生某些具体的产品，这么一来，即使创建者没有任何子类，依然可以创建产品。

- 工厂也可以只生产一种产品，即无参数化工厂，例子中的是有参数化工厂。

- 简单工厂把全部的事情，在一个地方都处理完了，然而工厂方法确实创建一个框架，让子类决定要如何实现
```

> **抽象工厂模式**：提供一个借口，用于创建相关或依赖对象的家族，而不需要明确的制定具体类。

```
抽象工厂的任务是定义一个负责创建这一组产品的接口，经常我们再抽象工厂中利用工厂方法实现生产方法。
```
**详见下图**

*简单工厂*
![结构图](/Resources/02-工厂模式-01.png)

*工厂方法*
![结构图](/Resources/02-工厂模式-02.png)

*依赖倒置原则*
![结构图](/Resources/02-工厂模式-03.png)

*抽象工厂*
![结构图](/Resources/02-工厂模式-04.png)

##### 杂七杂八

```
- 工厂方法和抽象工厂都是负责创建对象，工厂方法是继承，抽象工厂是组合。
- 工厂方法用来创建一个产品，不需要大接口，一个工厂方法就好。抽象工厂用来创建整个产品家族，需要一个大接口。
- 抽象工厂，当你需要创建产品家族和想让制造的相关产品集合起来时，你可以使用我。
- 工厂方法，把客户代码从需要实例化等具体类中解耦，使用也很简单，只要集成为子类，并实现父类的工厂方法就可以了。
```
